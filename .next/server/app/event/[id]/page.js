(()=>{var e={};e.id=744,e.ids=[744],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3561:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>c});var t=s(482),i=s(9108),r=s(2563),n=s.n(r),l=s(8300),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(a,d);let c=["",{children:["event",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6090)),"C:\\Users\\Administrator\\nana-cursor-admin-dashboard-gallery-feature-enhancement-a647\\src\\app\\event\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3625)),"C:\\Users\\Administrator\\nana-cursor-admin-dashboard-gallery-feature-enhancement-a647\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\Administrator\\nana-cursor-admin-dashboard-gallery-feature-enhancement-a647\\src\\app\\event\\[id]\\page.tsx"],m="/event/[id]/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/event/[id]/page",pathname:"/event/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6329:(e,a,s)=>{Promise.resolve().then(s.bind(s,8890))},1354:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(9224).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},8890:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>_});var t=s(5344),i=s(4767),r=s(6274),n=s(5037),l=s(1296),d=s(3729),c=s(5094),o=s(6540),m=s(3673),u=s(1467),x=s(1453);let p=d.forwardRef(({className:e,...a},s)=>t.jsx("textarea",{className:(0,x.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...a}));p.displayName="Textarea";var h=s(9151),g=s(3686),j=s(9224);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let y=(0,j.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),v=(0,j.Z)("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);var f=s(3380),b=s(1354),N=s(1765),k=s(8852),w=s(9464),P=s(339),A=s(6185),S=s(3291);function _(){let e=(0,i.useParams)(),a=e?.id,{toast:s}=(0,P.pm)(),x=(0,r.NL)(),[j,_]=(0,d.useState)(""),[T,Z]=(0,d.useState)(""),[q,C]=(0,d.useState)(!1),[D,G]=(0,d.useState)("Official"),[B,E]=(0,d.useState)(""),[M,F]=(0,d.useState)(""),[U,K]=(0,d.useState)(!1),[z,L]=(0,d.useState)(null),{data:O,isLoading:$}=(0,n.a)({queryKey:["/api/events",a],queryFn:async()=>(await (0,w.N)("GET",`/api/events/${a}`)).json(),enabled:!!a}),{data:I=[],isLoading:H}=(0,n.a)({queryKey:["/api/events",a,"photos",D],queryFn:async()=>(await (0,w.N)("GET",`/api/events/${a}/photos`)).json(),enabled:!!a&&!!D}),{data:Q=[],isLoading:V}=(0,n.a)({queryKey:["/api/events",a,"messages"],queryFn:async()=>(await (0,w.N)("GET",`/api/events/${a}/messages`)).json(),enabled:!!a}),J=(0,l.D)({mutationFn:async e=>(await (0,w.N)("POST",`/api/events/${a}/verify-code`,{accessCode:e})).json(),onSuccess:()=>{C(!0),s({title:"Kode Akses Benar!",description:"Anda sekarang dapat mengupload foto."})},onError:()=>{s({title:"Kode Salah",description:"Silakan periksa kembali kode akses Anda.",variant:"destructive"})}}),R=(0,d.useMemo)(()=>I.filter(e=>e.album_name===D),[I,D]),W=(0,l.D)({mutationFn:async e=>{if(!e.type.startsWith("image/"))throw Error("Hanya file gambar yang diperbolehkan");if(e.size>10485760)throw Error("Ukuran file maksimal 10MB");let s=new FormData;s.append("file",e),s.append("uploaderName",j||"Anonim"),s.append("albumName",D);let t=await (0,w.N)("POST",`/api/events/${a}/photos`,s);if(!t.ok)throw Error((await t.json().catch(()=>({}))).message||"Upload gagal");return t.json()},onError:e=>{s({title:"Upload Gagal",description:e instanceof Error?e.message:"Terjadi kesalahan saat upload",variant:"destructive"})},onSuccess:()=>{x.invalidateQueries({queryKey:["/api/events",a,"photos"]}),s({title:"Foto Berhasil Diupload!",description:"Foto Anda telah ditambahkan ke album."})},onError:()=>{s({title:"Upload Gagal",description:"Silakan coba lagi.",variant:"destructive"})}}),X=(0,l.D)({mutationFn:async e=>(await (0,w.N)("POST",`/api/events/${a}/messages`,e)).json(),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/events",a,"messages"]}),E(""),F(""),s({title:"Pesan Berhasil Dikirim!",description:"Pesan Anda telah ditambahkan ke buku tamu."})},onError:()=>{s({title:"Gagal",description:"Gagal mengirim pesan.",variant:"destructive"})}}),Y=e=>{navigator.clipboard.writeText(e),s({title:"Berhasil Disalin!",description:"Link telah disalin ke clipboard."})};if($)return t.jsx("div",{className:"min-h-screen bg-wedding-ivory flex items-center justify-center",children:t.jsx(A.Z,{})});if(!O)return t.jsx("div",{className:"min-h-screen bg-wedding-ivory flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Acara Tidak Ditemukan"}),t.jsx("p",{className:"text-gray-600",children:"Acara yang Anda cari tidak ada atau telah dihapus."})]})});let ee=e=>{L(e),K(!0)},ea=("Tamu"===D||"Bridesmaid"===D)&&!q;return(0,t.jsxs)("div",{className:"min-h-screen bg-wedding-ivory",children:[t.jsx("header",{className:"bg-white/90 backdrop-blur-sm border-b border-wedding-gold/20 p-2",children:t.jsx("div",{className:"container mx-auto",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:O.name}),t.jsx("p",{className:"text-gray-600 text-sm",children:new Date(O.date).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(c.z,{variant:"outline",size:"sm",onClick:()=>Y(O.shareable_link),children:t.jsx(h.Z,{className:"h-4 w-4"})}),t.jsx(c.z,{variant:"outline",size:"sm",onClick:()=>window.open(O.qr_code,"_blank"),children:t.jsx(g.Z,{className:"h-4 w-4"})})]})]})})}),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-4",children:[ea&&(0,t.jsxs)(m.Zb,{className:"mb-4 max-w-md mx-auto",children:[t.jsx(m.Ol,{children:(0,t.jsxs)(m.ll,{className:"flex items-center gap-2",children:[t.jsx(y,{className:"h-5 w-5"}),"Masukkan Kode Akses"]})}),(0,t.jsxs)(m.aY,{className:"space-y-4",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:['Album "',D,'" memerlukan kode akses untuk mengupload foto. Dapatkan kode dari penyelenggara acara.']}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[t.jsx(o.I,{type:"text",placeholder:"Masukkan kode akses",value:T,onChange:e=>Z(e.target.value.toUpperCase()),className:"uppercase"}),t.jsx(c.z,{onClick:()=>J.mutate(T),disabled:!T.trim()||J.isPending,children:t.jsx(v,{className:"h-4 w-4"})})]})]})]}),(0,t.jsxs)(u.mQ,{value:D,onValueChange:G,className:"w-full",children:[(0,t.jsxs)(u.dr,{className:"grid w-full grid-cols-4",children:[t.jsx(u.SP,{value:"Official",children:"Official"}),t.jsx(u.SP,{value:"Tamu",children:"Tamu"}),t.jsx(u.SP,{value:"Bridesmaid",children:"Bridesmaid"}),t.jsx(u.SP,{value:"Guestbook",children:"Guestbook"})]}),(0,t.jsxs)(u.nU,{value:D,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold mb-2",children:["Foto ",D]}),(0,t.jsxs)("p",{className:"text-gray-600 mb-6",children:["Official"===D&&"Foto resmi dari fotografer acara","Tamu"===D&&"Upload dan lihat foto dari para tamu","Bridesmaid"===D&&"Album khusus untuk para bridesmaid"]})]}),("Tamu"===D||"Bridesmaid"===D)&&!ea&&t.jsx(m.Zb,{className:"p-4 sm:p-6 mobile-input",children:(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex items-center justify-center w-full",children:(0,t.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-32 cursor-pointer rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 hover:bg-gray-100",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6 text-center",children:[t.jsx(f.Z,{className:`w-8 h-8 mb-3 ${"Tamu"===D?"text-wedding-rose":"text-wedding-sage"}`}),t.jsx("p",{className:"mb-2 text-sm text-gray-500",children:t.jsx("span",{className:"font-semibold",children:"Ketuk untuk upload foto"})}),t.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF (maks. 10MB)"})]}),t.jsx("input",{type:"file",multiple:!0,accept:"image/*",capture:"environment",onChange:e=>{Array.from(e.target.files||[]).forEach(e=>{if(!e.type.startsWith("image/")){s({title:"File Tidak Valid",description:"Hanya file gambar yang diperbolehkan.",variant:"destructive"});return}if(e.size>10485760){s({title:"File Terlalu Besar",description:"Ukuran file maksimal 10MB.",variant:"destructive"});return}W.mutate(e)})},className:"hidden"})]})}),t.jsx(o.I,{type:"text",placeholder:"Nama Anda (opsional)",value:j,onChange:e=>_(e.target.value),className:"text-base"}),W.isPending&&(0,t.jsxs)("div",{className:"flex items-center justify-center py-2",children:[t.jsx(A.Z,{}),t.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Mengupload foto..."})]})]})}),H?t.jsx("div",{className:"text-center py-8",children:t.jsx(A.Z,{})}):R.length>0?t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:R.map((e,a)=>(0,t.jsxs)("div",{className:"relative group cursor-pointer",onClick:()=>ee(a),children:[t.jsx("img",{src:e.url,alt:e.original_name,className:"w-full h-48 object-cover rounded-lg"}),t.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-all rounded-lg flex items-center justify-center",children:t.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity text-white",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(b.Z,{className:"h-4 w-4"}),t.jsx("span",{children:e.likes||0})]})})})]},e.id))}):(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[t.jsx(N.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,t.jsxs)("p",{children:["Belum ada foto di album ",D,"."]})]})]},D),(0,t.jsxs)(u.nU,{value:"Guestbook",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Buku Tamu Digital"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Tinggalkan pesan dan ucapan untuk pengantin"})]}),t.jsx(m.Zb,{className:"p-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx(o.I,{type:"text",placeholder:"Nama Anda",value:B,onChange:e=>E(e.target.value)}),t.jsx(p,{placeholder:"Tulis pesan atau ucapan Anda...",value:M,onChange:e=>F(e.target.value),rows:3}),(0,t.jsxs)(c.z,{onClick:()=>{if(!B.trim()||!M.trim()){s({title:"Informasi Kurang",description:"Mohon isi nama dan pesan.",variant:"destructive"});return}X.mutate({guestName:B.trim(),message:M.trim()})},disabled:X.isPending,className:"w-full bg-wedding-gold text-black hover:bg-wedding-gold/90",children:[t.jsx(k.Z,{className:"h-4 w-4"}),X.isPending?"Mengirim...":"Kirim Pesan"]})]})}),V?t.jsx("div",{className:"text-center py-8",children:t.jsx(A.Z,{})}):Q.length>0?t.jsx("div",{className:"space-y-4",children:Q.map(e=>t.jsx(m.Zb,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-semibold text-gray-800",children:e.guest_name}),t.jsx("p",{className:"text-gray-600 mt-1",children:e.message}),t.jsx("p",{className:"text-xs text-gray-400 mt-2",children:new Date(e.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,t.jsxs)(c.z,{variant:"ghost",size:"sm",className:"flex items-center space-x-1 text-wedding-rose hover:bg-wedding-rose/10",children:[t.jsx(b.Z,{className:"h-4 w-4"}),t.jsx("span",{children:e.hearts||0})]})]})},e.id))}):(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[t.jsx(k.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),t.jsx("p",{children:"Belum ada pesan. Jadilah yang pertama menulis ucapan!"})]})]})]}),U&&null!==z&&t.jsx(S.Z,{photos:R,currentIndex:z,onClose:()=>K(!1),onDelete:()=>{},onLike:()=>{},onUnlike:()=>{}})]})]})}},6090:(e,a,s)=>{"use strict";s.r(a),s.d(a,{$$typeof:()=>r,__esModule:()=>i,default:()=>n});let t=(0,s(6843).createProxy)(String.raw`C:\Users\Administrator\nana-cursor-admin-dashboard-gallery-feature-enhancement-a647\src\app\event\[id]\page.tsx`),{__esModule:i,$$typeof:r}=t,n=t.default}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[638,623,983,225,521],()=>s(3561));module.exports=t})();
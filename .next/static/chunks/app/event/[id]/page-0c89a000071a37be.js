(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[744],{9931:function(e,a,s){Promise.resolve().then(s.bind(s,6219))},5211:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(7461).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},6219:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return A}});var t=s(3827),i=s(5313),n=s(7082),r=s(7609),l=s(568),c=s(4090),d=s(575),o=s(2782),m=s(5671),u=s(9497),x=s(2169);let h=c.forwardRef((e,a)=>{let{className:s,...i}=e;return(0,t.jsx)("textarea",{className:(0,x.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...i})});h.displayName="Textarea";var p=s(2805),g=s(4704),j=s(7461);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,j.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),y=(0,j.Z)("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);var v=s(632),b=s(5211),N=s(7336),k=s(438),w=s(2571),S=s(6862),Z=s(5818),T=s(5382);function A(){let e=(0,i.useParams)(),a=null==e?void 0:e.id,{toast:s}=(0,S.pm)(),x=(0,n.NL)(),[j,A]=(0,c.useState)(""),[P,D]=(0,c.useState)(""),[B,C]=(0,c.useState)(!1),[E,F]=(0,c.useState)("Official"),[G,_]=(0,c.useState)(""),[K,z]=(0,c.useState)(""),[M,q]=(0,c.useState)(!1),[L,O]=(0,c.useState)(null),{data:U,isLoading:I}=(0,r.a)({queryKey:["/api/events",a],queryFn:async()=>(await (0,w.N)("GET","/api/events/".concat(a))).json(),enabled:!!a}),{data:H=[],isLoading:Q}=(0,r.a)({queryKey:["/api/events",a,"photos",E],queryFn:async()=>(await (0,w.N)("GET","/api/events/".concat(a,"/photos"))).json(),enabled:!!a&&!!E}),{data:V=[],isLoading:J}=(0,r.a)({queryKey:["/api/events",a,"messages"],queryFn:async()=>(await (0,w.N)("GET","/api/events/".concat(a,"/messages"))).json(),enabled:!!a}),W=(0,l.D)({mutationFn:async e=>(await (0,w.N)("POST","/api/events/".concat(a,"/verify-code"),{accessCode:e})).json(),onSuccess:()=>{C(!0),s({title:"Kode Akses Benar!",description:"Anda sekarang dapat mengupload foto."})},onError:()=>{s({title:"Kode Salah",description:"Silakan periksa kembali kode akses Anda.",variant:"destructive"})}}),R=(0,c.useMemo)(()=>H.filter(e=>e.album_name===E),[H,E]),Y=(0,l.D)({mutationFn:async e=>{if(!e.type.startsWith("image/"))throw Error("Hanya file gambar yang diperbolehkan");if(e.size>10485760)throw Error("Ukuran file maksimal 10MB");let s=new FormData;s.append("file",e),s.append("uploaderName",j||"Anonim"),s.append("albumName",E);let t=await (0,w.N)("POST","/api/events/".concat(a,"/photos"),s);if(!t.ok)throw Error((await t.json().catch(()=>({}))).message||"Upload gagal");return t.json()},onError:e=>{s({title:"Upload Gagal",description:e instanceof Error?e.message:"Terjadi kesalahan saat upload",variant:"destructive"})},onSuccess:()=>{x.invalidateQueries({queryKey:["/api/events",a,"photos"]}),s({title:"Foto Berhasil Diupload!",description:"Foto Anda telah ditambahkan ke album."})},onError:()=>{s({title:"Upload Gagal",description:"Silakan coba lagi.",variant:"destructive"})}}),X=(0,l.D)({mutationFn:async e=>(await (0,w.N)("POST","/api/events/".concat(a,"/messages"),e)).json(),onSuccess:()=>{x.invalidateQueries({queryKey:["/api/events",a,"messages"]}),_(""),z(""),s({title:"Pesan Berhasil Dikirim!",description:"Pesan Anda telah ditambahkan ke buku tamu."})},onError:()=>{s({title:"Gagal",description:"Gagal mengirim pesan.",variant:"destructive"})}}),$=e=>{navigator.clipboard.writeText(e),s({title:"Berhasil Disalin!",description:"Link telah disalin ke clipboard."})};if(I)return(0,t.jsx)("div",{className:"min-h-screen bg-wedding-ivory flex items-center justify-center",children:(0,t.jsx)(Z.Z,{})});if(!U)return(0,t.jsx)("div",{className:"min-h-screen bg-wedding-ivory flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Acara Tidak Ditemukan"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Acara yang Anda cari tidak ada atau telah dihapus."})]})});let ee=e=>{O(e),q(!0)},ea=("Tamu"===E||"Bridesmaid"===E)&&!B;return(0,t.jsxs)("div",{className:"min-h-screen bg-wedding-ivory",children:[(0,t.jsx)("header",{className:"bg-white/90 backdrop-blur-sm border-b border-wedding-gold/20 p-2",children:(0,t.jsx)("div",{className:"container mx-auto",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:U.name}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:new Date(U.date).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.z,{variant:"outline",size:"sm",onClick:()=>$(U.shareable_link),children:(0,t.jsx)(p.Z,{className:"h-4 w-4"})}),(0,t.jsx)(d.z,{variant:"outline",size:"sm",onClick:()=>window.open(U.qr_code,"_blank"),children:(0,t.jsx)(g.Z,{className:"h-4 w-4"})})]})]})})}),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-4",children:[ea&&(0,t.jsxs)(m.Zb,{className:"mb-4 max-w-md mx-auto",children:[(0,t.jsx)(m.Ol,{children:(0,t.jsxs)(m.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(f,{className:"h-5 w-5"}),"Masukkan Kode Akses"]})}),(0,t.jsxs)(m.aY,{className:"space-y-4",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:['Album "',E,'" memerlukan kode akses untuk mengupload foto. Dapatkan kode dari penyelenggara acara.']}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(o.I,{type:"text",placeholder:"Masukkan kode akses",value:P,onChange:e=>D(e.target.value.toUpperCase()),className:"uppercase"}),(0,t.jsx)(d.z,{onClick:()=>W.mutate(P),disabled:!P.trim()||W.isPending,children:(0,t.jsx)(y,{className:"h-4 w-4"})})]})]})]}),(0,t.jsxs)(u.mQ,{value:E,onValueChange:F,className:"w-full",children:[(0,t.jsxs)(u.dr,{className:"grid w-full grid-cols-4",children:[(0,t.jsx)(u.SP,{value:"Official",children:"Official"}),(0,t.jsx)(u.SP,{value:"Tamu",children:"Tamu"}),(0,t.jsx)(u.SP,{value:"Bridesmaid",children:"Bridesmaid"}),(0,t.jsx)(u.SP,{value:"Guestbook",children:"Guestbook"})]}),(0,t.jsxs)(u.nU,{value:E,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold mb-2",children:["Foto ",E]}),(0,t.jsxs)("p",{className:"text-gray-600 mb-6",children:["Official"===E&&"Foto resmi dari fotografer acara","Tamu"===E&&"Upload dan lihat foto dari para tamu","Bridesmaid"===E&&"Album khusus untuk para bridesmaid"]})]}),("Tamu"===E||"Bridesmaid"===E)&&!ea&&(0,t.jsx)(m.Zb,{className:"p-4 sm:p-6 mobile-input",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,t.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-32 cursor-pointer rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 hover:bg-gray-100",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6 text-center",children:[(0,t.jsx)(v.Z,{className:"w-8 h-8 mb-3 ".concat("Tamu"===E?"text-wedding-rose":"text-wedding-sage")}),(0,t.jsx)("p",{className:"mb-2 text-sm text-gray-500",children:(0,t.jsx)("span",{className:"font-semibold",children:"Ketuk untuk upload foto"})}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF (maks. 10MB)"})]}),(0,t.jsx)("input",{type:"file",multiple:!0,accept:"image/*",capture:"environment",onChange:e=>{Array.from(e.target.files||[]).forEach(e=>{if(!e.type.startsWith("image/")){s({title:"File Tidak Valid",description:"Hanya file gambar yang diperbolehkan.",variant:"destructive"});return}if(e.size>10485760){s({title:"File Terlalu Besar",description:"Ukuran file maksimal 10MB.",variant:"destructive"});return}Y.mutate(e)})},className:"hidden"})]})}),(0,t.jsx)(o.I,{type:"text",placeholder:"Nama Anda (opsional)",value:j,onChange:e=>A(e.target.value),className:"text-base"}),Y.isPending&&(0,t.jsxs)("div",{className:"flex items-center justify-center py-2",children:[(0,t.jsx)(Z.Z,{}),(0,t.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Mengupload foto..."})]})]})}),Q?(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)(Z.Z,{})}):R.length>0?(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:R.map((e,a)=>(0,t.jsxs)("div",{className:"relative group cursor-pointer",onClick:()=>ee(a),children:[(0,t.jsx)("img",{src:e.url,alt:e.original_name,className:"w-full h-48 object-cover rounded-lg"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-all rounded-lg flex items-center justify-center",children:(0,t.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity text-white",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(b.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:e.likes||0})]})})})]},e.id))}):(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,t.jsx)(N.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,t.jsxs)("p",{children:["Belum ada foto di album ",E,"."]})]})]},E),(0,t.jsxs)(u.nU,{value:"Guestbook",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Buku Tamu Digital"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Tinggalkan pesan dan ucapan untuk pengantin"})]}),(0,t.jsx)(m.Zb,{className:"p-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(o.I,{type:"text",placeholder:"Nama Anda",value:G,onChange:e=>_(e.target.value)}),(0,t.jsx)(h,{placeholder:"Tulis pesan atau ucapan Anda...",value:K,onChange:e=>z(e.target.value),rows:3}),(0,t.jsxs)(d.z,{onClick:()=>{if(!G.trim()||!K.trim()){s({title:"Informasi Kurang",description:"Mohon isi nama dan pesan.",variant:"destructive"});return}X.mutate({guestName:G.trim(),message:K.trim()})},disabled:X.isPending,className:"w-full bg-wedding-gold text-black hover:bg-wedding-gold/90",children:[(0,t.jsx)(k.Z,{className:"h-4 w-4"}),X.isPending?"Mengirim...":"Kirim Pesan"]})]})}),J?(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)(Z.Z,{})}):V.length>0?(0,t.jsx)("div",{className:"space-y-4",children:V.map(e=>(0,t.jsx)(m.Zb,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-800",children:e.guest_name}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:e.message}),(0,t.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:new Date(e.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,t.jsxs)(d.z,{variant:"ghost",size:"sm",className:"flex items-center space-x-1 text-wedding-rose hover:bg-wedding-rose/10",children:[(0,t.jsx)(b.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:e.hearts||0})]})]})},e.id))}):(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,t.jsx)(k.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,t.jsx)("p",{children:"Belum ada pesan. Jadilah yang pertama menulis ucapan!"})]})]})]}),M&&null!==L&&(0,t.jsx)(T.Z,{photos:R,currentIndex:L,onClose:()=>q(!1),onDelete:()=>{},onLike:()=>{},onUnlike:()=>{}})]})]})}}},function(e){e.O(0,[618,524,552,236,971,69,560],function(){return e(e.s=9931)}),_N_E=e.O()}]);